<div ng-controller="ExplorerCtrl">

    <!-- Menu toggle -->
    <a href="#side-menu" id="menuLink" class="menu-link">
        <!-- Hamburger icon -->
        <span></span>
    </a>

    <div id="side-menu">
      
      <div class="padding">
       
       <button id="showFiltersMobile" ng-click="toggleFilters('open' , $event)" class="pure-button" href="#">Show filters</button>
       
       <section id="toggleViews">
          <div id="viewOptions">
            <h3>View</h3>
            <ul class="filter">
              <li><button id="wordCloudView" ng-click="toggleExplorer('wordcloud')" class="active">Wordcloud</button></li>
              <li><button id="chartView" ng-click="toggleExplorer('scatterplot')">Chart</button></li>
              <li><button id="blockView" ng-click="toggleExplorer('treemap')">Block</button></li>
              <li><button id="listView" ng-click="toggleExplorer('list')">List</button></li>
            </ul>
          </div>

          <div id="locationOptions">
            <h3>Location Options</h3>
            
            <ul class="filter">
              <li ng-repeat="location in locations">
                <button ng-class="{selected: location.name === 'all'}" class="locationToggle" target-location="{{location.name}}" location="location" select-start="selectionStart" interval="interval" set-location='setLocation' update-fn='getTrends'>{{ location.name | allAsGlobal }}</button>
              </li>
            </ul>
          </div>
          

         <div id="sourceOptions">
          <h3>Source Options</h3>
          <ul class="filter">
              <li><button class="selected">All sources</button></li>
              <li><button>Blogs</button></li>
              <li><button>News</button></li>
              <li><button>Academia</button></li>
              <li><button>Twitter</button></li>
          </ul>
          </div>
          
          <div id="velocityOptions">
            <h3>Velocity</h3>
            <ul class="filter">
                <li><button class="selected">All</button></li>
                <li><button>Low</button></li>
                <li><button>Medium</button></li>
                <li><button>High</button></li>
            </ul>
          </div>

       </section>

      </div>
    </div>


  <div id="graph-container" class="wordcloud-container" style = "float:right; width:80%;">
    <div ng-hide="dataAvailable" class="unavailableOverlay">
      <p>Data unavailable for selection</p>
    </div>
    <div wordcloud id="wordcloud" style="" map-scale="1" trends="trends"></div>
    <div scatter-plot id="scatterplot" trends="trends"></div>
    <div treemap id="treemap" trends="trends"></div>
    <div id="list">
      <ul><li ng-repeat="trend in trends">  <a href="#/trends/{{ trend.term | urlEncode }}?selectionStart={{ selectionStart.getTime() }}&selectionEnd={{ selectionEnd.getTime() }}"> {{ trend.term }} <span>Score: {{ trend.velocity.toFixed(2) }}</span></a></li></ul>
    </div>

    <div timespan location="location" select-start="selectionStart" select-end="selectionEnd" interval="interval" start="spanStart" end="spanEnd" update-fn='getTrends' class='ui-brush'></div>
    <div ng-visible="true" ng-click="resetPanels()" id="overlay"></div>
    <div ng-repeat="(idx,trend) in trends | orderBy:'-velocity'" class="trendPanel" id="trend-panel-{{ idx }}">
      <h4>{{ trend.term }}</h4>
      <p>Would you like to find out more about this trend?</p>
      <a class="pure-button" href="#/trends/{{ trend.term | urlEncode }}?selectionStart={{ selectionStart.getTime() }}&selectionEnd={{ selectionEnd.getTime() }}">Find out more</a>
      <a class="close" ng-click="resetPanels()"><i class="fa fa-times-circle-o"></i></a>
    </div>
  </div>

</div>